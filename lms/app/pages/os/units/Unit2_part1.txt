'use client';
import React from 'react';
import Quiz from '../components/Quiz';
import VideoEmbed from '../components/VideoEmbed';

interface Unit2Props {
  currentModule: number;
  setCurrentModule: (module: number) => void;
}

const Unit2: React.FC<Unit2Props> = ({ currentModule, setCurrentModule }) => {
  const module1Quiz = [
    {
      question: "What is a process?",
      options: ["A program in execution", "A program stored on disk", "A CPU instruction", "A memory location"],
      correctAnswer: 0,
      explanation: "A process is a program in execution. It includes the program code, current activity, and allocated resources."
    },
    {
      question: "Which state comes after the 'Ready' state?",
      options: ["New", "Running", "Waiting", "Terminated"],
      correctAnswer: 1,
      explanation: "After Ready state, when the scheduler selects the process, it moves to Running state."
    },
    {
      question: "What does PCB stand for?",
      options: ["Process Control Block", "Program Control Block", "Process Code Block", "Program Code Block"],
      correctAnswer: 0,
      explanation: "PCB stands for Process Control Block, which contains all information about a process."
    }
  ];

  const module2Quiz = [
    {
      question: "Which scheduler selects processes from the job pool?",
      options: ["Short-term scheduler", "Long-term scheduler", "Medium-term scheduler", "CPU scheduler"],
      correctAnswer: 1,
      explanation: "Long-term scheduler (job scheduler) selects processes from the job pool and loads them into memory."
    },
    {
      question: "What is the main criterion for FCFS scheduling?",
      options: ["Priority", "Burst time", "Arrival time", "Deadline"],
      correctAnswer: 2,
      explanation: "FCFS (First Come First Serve) schedules processes based on their arrival time."
    },
    {
      question: "Which scheduling algorithm is optimal?",
      options: ["FCFS", "SJF", "Round Robin", "Priority"],
      correctAnswer: 1,
      explanation: "SJF (Shortest Job First) is optimal as it gives minimum average waiting time."
    }
  ];

  const renderModule = () => {
    switch (currentModule) {
      case 1:
        return (
          <div className="module-content">
            <h2>Module 1: Process Concepts</h2>
            
            <section className="content-section">
              <h3>What is a Process?</h3>
              <p>A process is a program in execution. It is an active entity that requires resources such as CPU time, memory, files, and I/O devices to accomplish its task.</p>
              
              <h4>Difference between Program and Process:</h4>
              <ul>
                <li><strong>Program:</strong> Passive entity stored on disk (executable file)</li>
                <li><strong>Process:</strong> Active entity with program counter and resources</li>
              </ul>

              <div className="image-container">
                <img src="https://media.geeksforgeeks.org/wp-content/uploads/20230612163635/Process-in-Operating-System.png" alt="Process in Memory" />
                <p className="image-caption">Figure 2.1: Process in Memory</p>
              </div>

              <h3>Process State Diagram</h3>
              <p>A process goes through various states during its lifetime:</p>
              
              <h4>Process States:</h4>
              <ul>
                <li><strong>New:</strong> Process is being created</li>
                <li><strong>Ready:</strong> Process is waiting to be assigned to processor</li>
                <li><strong>Running:</strong> Instructions are being executed</li>
                <li><strong>Waiting:</strong> Process is waiting for some event (I/O completion)</li>
                <li><strong>Terminated:</strong> Process has finished execution</li>
              </ul>

              <div className="image-container">
                <img src="https://media.geeksforgeeks.org/wp-content/uploads/20230612164356/Process-State-Diagram.png" alt="Process State Diagram" />
                <p className="image-caption">Figure 2.2: Process State Diagram</p>
              </div>

              <h3>Process Control Block (PCB)</h3>
              <p>PCB is a data structure maintained by the OS for every process. It contains all information about a process.</p>

              <h4>Components of PCB:</h4>
              <ul>
                <li><strong>Process ID (PID):</strong> Unique identifier for the process</li>
                <li><strong>Process State:</strong> Current state (new, ready, running, waiting, terminated)</li>
                <li><strong>Program Counter:</strong> Address of next instruction to execute</li>
                <li><strong>CPU Registers:</strong> Contents of processor registers</li>
                <li><strong>CPU Scheduling Information:</strong> Priority, scheduling queue pointers</li>
                <li><strong>Memory Management Information:</strong> Page tables, segment tables</li>
                <li><strong>Accounting Information:</strong> CPU time used, time limits</li>
                <li><strong>I/O Status Information:</strong> List of I/O devices allocated</li>
              </ul>

              <div className="image-container">
                <img src="https://media.geeksforgeeks.org/wp-content/uploads/20230612164527/Process-Control-Block.png" alt="PCB" />
                <p className="image-caption">Figure 2.3: Process Control Block structure</p>
              </div>

              <h3>Process Operations</h3>

              <h4>1. Process Creation</h4>
              <p>A process may create several new processes during execution. The creating process is called parent, and new processes are called children.</p>
              <ul>
                <li>Parent and children execute concurrently</li>
                <li>Parent waits until children terminate</li>
                <li>Children may share resources with parent</li>
              </ul>

              <h4>2. Process Termination</h4>
              <p>Process terminates when it finishes executing its final statement.</p>
              <ul>
                <li>Normal termination: exit() system call</li>
                <li>Abnormal termination: killed by another process</li>
                <li>Resources are deallocated by OS</li>
              </ul>
            </section>

            <VideoEmbed 
              videoId="OrM7nZcxXZU"
              title="Introduction to Processes"
              description="Comprehensive introduction to processes, process states, and process control block in operating systems."
            />

            <VideoEmbed 
              videoId="2i2N_Qo_FyM"
              title="Process State Diagram"
              description="Detailed explanation of process state transitions and the process lifecycle."
            />

            <Quiz title="Module 1 Quiz" questions={module1Quiz} />

            <div className="navigation-buttons">
              <button onClick={() => setCurrentModule(2)} className="next-module-btn">Next Module â†’</button>
            </div>
          </div>
        );

      default:
        return <div>Module content loading...</div>;
    }
  };

  return <div className="unit-container">{renderModule()}</div>;
};

export default Unit2;
